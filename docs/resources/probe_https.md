---
page_title: "alkira_probe_https Resource - terraform-provider-alkira"
subcategory: ""
description: |-
  Manage Alkira HTTPS Probe.
---

# alkira_probe_https (Resource)

Manage Alkira HTTPS Probe.

The `alkira_probe_https` resource allows you to configure and manage HTTPS probes in the Alkira network. 
HTTPS probes provide secure monitoring of TLS/SSL-enabled endpoints by periodically sending HTTPS 
requests and evaluating responses based on configurable validation criteria. 
This resource supports advanced TLS options like certificate validation, SNI, and custom CA certificates.
Connection will always be initiated to the EIPs associated with the Internet Application, 
the host specified in the uri will be added to the host header


## Example Usage

### Basic HTTPS Probe
This example demonstrates a simple HTTPS probe that monitors an API status endpoint:
```terraform
resource "alkira_probe_https" "basic_https" {
  name = "basic-https-probe"

  network_entity_id = alkira_internet_application.example_application.id

  uri = "www.alkira.net/api/status"
}
```

### HTTPS Probe with Custom Certificate Validation
This example shows an HTTPS probe with a custom CA certificate for validating self-signed or internal certificates:
```terraform
resource "alkira_probe_https" "custom_cert_https" {
  name    = "https-custom-cert"
  enabled = true

  network_entity {
    type = "INTERNET_APPLICATION"
    id   = alkira_internet_application.example_application.id
  }

  uri         = "www.alkira.net/secure/endpoint"
  server_name = "api.example.com"

  # we can either pass the path of the file 
  # ca_certificate = file("${path.module}/certs/exmaple_ca.pem")

  # or the whole certificate as a string.
  ca_certificate = "-----BEGIN CERTIFICATE-----ZXhhbXBsZS1jYS1jZXJ0aWZpY2F0ZS4gSGVsbG8gY3VyaW91cyBwZXJzb24=-----END CERTIFICATE-----"

  validators {
    type        = "STATUS_CODE"
    status_code = "200"
  }

  failure_threshold = 2
  success_threshold = 1
  period_seconds    = 60
  timeout_seconds   = 15
}
``` 

### HTTPS Probe with Certificate Validation Disabled
This example demonstrates an HTTPS probe with certificate validation disabled, useful for testing or environments with self-signed certificates where the CA is unavailable:
```terraform
resource "alkira_probe_https" "no_cert_validation" {
  name    = "https-no-cert-validation"
  enabled = true

  network_entity {
    type = "INTERNET_APPLICATION"
    id   = alkira_internet_application.example_application.id
  }

  uri                     = "www.alkira.net/api/dashboard"
  disable_cert_validation = true

  validators {
    type  = "RESPONSE_BODY"
    regex = ".*Dashboard Ready.*"
  }

  period_seconds  = 45
  timeout_seconds = 10
}
``` 
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the HTTPS probe.
- `network_entity` (Block List, Min: 1, Max: 1) Network entity configuration. (see [below for nested schema](#nestedblock--network_entity))
- `network_entity_id` (String) The ID of the internet application network entity to probe.
- `uri` (String) The URI to probe.

### Optional

- `ca_certificate` (String) Required when certificate validation is enabled and certificate is self assigned.
- `disable_cert_validation` (Boolean) Whether to disable certificate validation.
- `enabled` (Boolean) Whether the probe is enabled.
- `failure_threshold` (Number) The number of consecutive failures required to mark the probe as failed. Default is `3`, and the maximum value allowed is `50`.
- `period_seconds` (Number) How often (in seconds) to perform the probe. Default value is `60`, and the maximum value allowed is `360`.
- `server_name` (String) The server name for TLS SNI.
- `success_threshold` (Number) The number of consecutive successes required to mark the probe as successful. Default value is `1`, and the maximum value allowed is `50`.
- `timeout_seconds` (Number) Number of seconds after which the probe times out. Default value is `60`, and the maximum value allowed is `360`. `timeout_seconds` should always be less than or equal to `period_seconds`.
- `validators` (Block List) Validators for the HTTP response. (see [below for nested schema](#nestedblock--validators))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--network_entity"></a>
### Nested Schema for `network_entity`

Required:

- `id` (String) The ID of the network entity.
- `type` (String) The type of network entity to probe. Only `INTERNET_APPLICATION` supported for now.


<a id="nestedblock--validators"></a>
### Nested Schema for `validators`

Required:

- `type` (String) Type of Validator, can be one of `HTTP_STATUS_CODE` or `HTTP_RESPONSE_BODY`.

Optional:

- `regex` (String) Regex the response body should match.
- `status_code` (String) Response code the response should have.


