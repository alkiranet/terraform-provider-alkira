---
page_title: "alkira_connector_azure_vnet Resource - terraform-provider-alkira"
subcategory: ""
description: |-
  Manage Azure VNET Connector.
---

# alkira_connector_azure_vnet (Resource)

Manage Azure VNET Connector.

## Routing Options

Either `vnet_cidr` or `vnet_subnet` needs to be specified for routing
purpose.  If `vnet_cidr` is provided, it will automatically select all
associated subnets of the given VNET. Otherwise, you can select
certain subnets by specifying `vnet_subnet`.

## Example Usage

This is one simple minimal example to create an AZURE VNET
connector. One `alkira_segment` and `alkira_credential_azure_vnet` are
always required.

```terraform
resource "alkira_connector_azure_vnet" "test1" {
  name           = "test1"
  azure_vnet_id  = "/subscriptions/XXXX/resourceGroups/Test/providers/Microsoft.Network/virtualNetworks/test1"
  credential_id  = alkira_credential_azure_vnet.test1.id
  cxp            = "US-WEST"
  group          = "test"
  segment_id     = alkira_segment.segment1.id
  size           = "SMALL"
}
```

You could adjust routing options on VNET level by using
`routing_options` and `routing_prefix_list_ids` along with resource
`alkira_policy_prefix_list`:

```terraform
resource "alkira_connector_azure_vnet" "test2" {
  name           = "test2"
  azure_vnet_id  = "/subscriptions/XXXX/resourceGroups/Test/providers/Microsoft.Network/virtualNetworks/test-vnet2"
  credential_id  = alkira_credential_azure_vnet.yours.id
  cxp            = "US-WEST"
  group          = "test"
  segment_id     = alkira_segment.segment1.id
  size           = "SMALL"

  routing_options         = "ADVERTISE_CUSTOM_PREFIX"
  routing_prefix_list_ids = [alkira_policy_prefix_list.test.id]
}
```

Moreover, to adjust routing options for CIDR or subnet of the VNET,
you could use `vnet_cidr` or `vnet_subnet` block:

```terraform
resource "alkira_connector_azure_vnet" "cidr" {
  name                    = "test-cidr"
  azure_vnet_id           = azurerm_virtual_network.vnet.id
  credential_id           = alkira_credential_azure_vnet.vnet.id
  cxp                     = "US-WEST"
  group                   = alkira_group.test.name
  segment_id              = alkira_segment.test.id
  size                    = "SMALL"

  vnet_cidr {
    cidr            = "10.0.0.0/16"
    prefix_list_ids = [alkira_policy_prefix_list.azure.id]
    routing_options = "ADVERTISE_CUSTOM_PREFIX"
    service_tags    = ["ApiManagement", "AppService"]
  }
}
```

There could be multi `vnet_subnet` blocks specified for each subnet if
needed:

```terraform
resource "alkira_connector_azure_vnet" "subnet" {
  name                    = "test-subnet"
  azure_vnet_id           = azurerm_virtual_network.vnet.id
  credential_id           = alkira_credential_azure_vnet.testtest.id
  cxp                     = "US-WEST"
  group                   = alkira_group.test.name
  segment_id              = alkira_segment.test.id
  size                    = "SMALL"

  vnet_subnet {
    subnet_id       = data.azurerm_subnet.vnet.id
    prefix_list_ids = [alkira_policy_prefix_list.azure.id]
    routing_options = "ADVERTISE_CUSTOM_PREFIX"
    service_tags    = ["ApiManagement", "AppService"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `azure_vnet_id` (String) Azure Virtual Network Id.
- `credential_id` (String) ID of credential managed by Credential Manager.
- `cxp` (String) The CXP where the connector should be provisioned.
- `name` (String) The name of the connector.
- `segment_id` (String) The ID of the segment assoicated with the connector.
- `size` (String) The size of the connector, one of `SMALL`, `MEDIUM`, `LARGE`, `2LARGE`, `4LARGE`, `5LARGE`, `10LARGE`, `20LARGE`.

### Optional

- `billing_tag_ids` (List of Number) Tags for billing.
- `connection_mode` (String) The method the Vnet will use to connect. Options are `VNET_GATEWAY` or `VNET_PEERING`. Vnet Peering requires an Alkira Transit Hub (ATH) to be available for your network. If no value is specified here, the connector will be use Vnet Peering if it is available, otherwise it will connect via a Vnet Gateay.
- `enabled` (Boolean) Is the connector enabled. Default is `true`.
- `failover_cxps` (List of String) A list of additional CXPs where the connector should be provisioned for failover.
- `group` (String) The group of the connector.
- `routing_options` (String) Routing options for the entire VNET, either `ADVERTISE_DEFAULT_ROUTE` or `ADVERTISE_CUSTOM_PREFIX`. Default is `AVERTISE_DEFAULT_ROUTE`.
- `routing_prefix_list_ids` (List of Number) Prefix List IDs.
- `service_tags` (List of String) list of service tags from Azure. Providing a service tag here, would result in service tag route configuration on VNET route table, so that the traffic toward the service would directly steer towards those services, and would not go via Alkira network.
- `vnet_cidr` (Block Set) Configure routing options on specified VNET CIDR. (see [below for nested schema](#nestedblock--vnet_cidr))
- `vnet_subnet` (Block Set) Configure routing options on the specified VNET subnet. (see [below for nested schema](#nestedblock--vnet_subnet))

### Read-Only

- `id` (String) The ID of this resource.
- `implicit_group_id` (Number) The ID of implicit group automaticaly created with the connector.
- `provision_state` (String) The provision state of the connector.

<a id="nestedblock--vnet_cidr"></a>
### Nested Schema for `vnet_cidr`

Required:

- `cidr` (String) VNET CIDR.

Optional:

- `prefix_list_ids` (List of Number) Prefix List IDs.
- `routing_options` (String) Routing options for the CIDR, either `ADVERTISE_DEFAULT_ROUTE` or `ADVERTISE_CUSTOM_PREFIX`.
- `service_tags` (List of String) List of service tags provided by Azure.


<a id="nestedblock--vnet_subnet"></a>
### Nested Schema for `vnet_subnet`

Required:

- `subnet_id` (String) VNET subnet ID.

Optional:

- `prefix_list_ids` (List of Number) Prefix List IDs.
- `routing_options` (String) Routing options for the subnet, either `ADVERTISE_DEFAULT_ROUTE` or `ADVERTISE_CUSTOM_PREFIX`.
- `service_tags` (List of String) List of service tags provided by Azure.
- `subnet_cidr` (String) VNET subnet CIDR.

## Import

Import is supported using the following syntax:

```shell
terraform import alkira_connector_azure_vnet.example CONNECTOR_ID
```
