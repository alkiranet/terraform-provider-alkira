---
page_title: "alkira_probe_http Resource - terraform-provider-alkira"
subcategory: ""
description: |-
  Manage Alkira HTTP Probe.
---

# alkira_probe_http (Resource)

Manage Alkira HTTP Probe.

The `alkira_probe_http` resource allows you to configure and manage HTTP probes in the Alkira network.
HTTP probes help monitor the health and availability of services by periodically sending HTTP requests 
to specified endpoints and evaluating the responses based on configurable validation criteria.
Connection will always be initiated to the EIPs associated with the Internet Application, 
the host specified in the uri will be added to the host header


## Example Usage

### Basic HTTP Probe
This example demonstrates a simple HTTP probe that checks a health endpoint:
```terraform
resource "alkira_probe_http" "basic_http" {
  name = "basic-http-probe"

  network_entity {
    type = "INTERNET_APPLICATION"
    id   = alkira_internet_application.example_application.id
  }

  uri = "www.alkira.net/api/health"
}
```

### Advanced HTTP Probe with Headers and Validators
This example demonstrates a more advanced HTTP probe with custom headers and response validation:
```terraform
resource "alkira_probe_http" "advanced_http" {
  name    = "http-with-validators"
  enabled = true

  network_entity {
    type = "INTERNET_APPLICATION"
    id   = alkira_internet_application.example_application.id
  }

  uri = "www.alkira.net/api/health"

  headers = {
    "Authorization" = "Bearer token123"
    "Content-Type"  = "application/json"
    "Accept"        = "application/json"
  }

  validators {
    type        = "STATUS_CODE"
    status_code = "200-299"
  }

  validators {
    type  = "RESPONSE_BODY"
    regex = ".*status.*:.*OK.*"
  }

  failure_threshold = 3
  success_threshold = 2
  period_seconds    = 30
  timeout_seconds   = 10
}
``` 
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the HTTP probe.
- `network_entity` (Block List, Min: 1, Max: 1) Network entity configuration. (see [below for nested schema](#nestedblock--network_entity))
- `uri` (String) The URI to probe.

### Optional

- `enabled` (Boolean) Whether the probe is enabled.
- `failure_threshold` (Number) The number of consecutive failures required to mark the probe as failed. Default is `3`, and the maximum value allowed is `50`.
- `period_seconds` (Number) How often (in seconds) to perform the probe. Default value is `60`, and the maximum value allowed is `360`.
- `success_threshold` (Number) The number of consecutive successes required to mark the probe as successful. Default value is `1`, and the maximum value allowed is `50`.
- `timeout_seconds` (Number) Number of seconds after which the probe times out. Default value is `60`, and the maximum value allowed is `360`. `timeout_seconds` should always be greater than `period_seconds`.
- `validators` (Block List) Validators for the HTTP response. (see [below for nested schema](#nestedblock--validators))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--network_entity"></a>
### Nested Schema for `network_entity`

Required:

- `id` (String) The ID of the network entity.
- `type` (String) The type of network entity to probe. Only `INTERNET_APPLICATION` supported for now.


<a id="nestedblock--validators"></a>
### Nested Schema for `validators`

Required:

- `type` (String) Type of Validator, can be one of `HTTP_STATUS_CODE` or `HTTP_RESPONSE_BODY`.

Optional:

- `regex` (String) Regex the response body should match.
- `status_code` (String) Response code the response should have.


