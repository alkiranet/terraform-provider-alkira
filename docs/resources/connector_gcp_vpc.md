---
page_title: "alkira_connector_gcp_vpc Resource - terraform-provider-alkira"
subcategory: ""
description: |-
  Manage GCP Cloud Connector.
---

# alkira_connector_gcp_vpc (Resource)

Manage GCP Cloud Connector.

## Routing Options

To select specific subnets of the vpc for routing through alkira `vpc_subnet` needs to be specified. GCP supports multiple prefixes per subnet in the form of secondary ranges. For each prefix an individual `vpc_subnet` block must be specified.

## Example Usage

This is one simple minimal example to create a GCP VPC
connector.

```terraform
resource "alkira_connector_gcp_vpc" "gcp_vpc1" {
  name           = "example-vpc1"
  gcp_region     = "us-west1"
  gcp_vpc_name   = "example-vpc1"
  cxp            = "US-WEST"
  size           = "SMALL"
  credential_id  = alkira_credential_gcp_vpc.terraform_gcp_account.id
  group          = alkira_group.group1.name
  segment_id     = alkira_segment.segment1.id
}
```

You could adjust routing options on VPC level by using
`gcp_routing` and `prefix_list_ids` along with resource
`alkira_policy_prefix_list`:

```terraform
resource "alkira_connector_gcp_vpc" "gcp_routing" {
  name           = "example-vpc1"
  gcp_region     = "us-west1"
  gcp_vpc_name   = "example-vpc1"
  cxp            = "US-WEST"
  size           = "SMALL"
  credential_id  = alkira_credential_gcp_vpc.terraform_gcp_account.id
  group          = alkira_group.group1.name
  segment_id     = alkira_segment.segment1.id

  gcp_routing {
    prefix_list_ids = [alkira_policy_prefix_list.azure.id]
    custom_prefix = "ADVERTISE_CUSTOM_PREFIX"
  }
}
```

Moreover, to select part of the GCP VPC to be onboarded, you could use `vpc_subnet` block. There can be multiple `vpc_subnet` blocks specified for each subnet-prefix combination if needed:

```terraform
resource "alkira_connector_gcp_vpc" "gcp_subnet" {
  name           = "example-vpc1"
  gcp_region     = "us-west1"
  gcp_vpc_name   = "example-vpc1"
  cxp            = "US-WEST"
  size           = "SMALL"
  credential_id  = alkira_credential_gcp_vpc.terraform_gcp_account.id
  group          = alkira_group.group1.name
  segment_id     = alkira_segment.segment1.id

  gcp_routing {
    prefix_list_ids = [alkira_policy_prefix_list.azure.id]
    custom_prefix = "ADVERTISE_CUSTOM_PREFIX"
  }

  vpc_subnet {
    id   =  "projects/{{project}}/regions/{{region}}/subnetworks/{{name}}"
    cidr = "10.100.1.0/24"
  }

  vpc_subnet {
    id   =  "projects/{{project}}/regions/{{region}}/subnetworks/{{name}}"
    cidr = "10.100.2.0/24"
  }

  vpc_subnet {
    id   =  "projects/{{project}}/regions/{{region}}/subnetworks/{{name}}"
    cidr = "10.200.1.0/24"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `credential_id` (String) ID of resource `credential_gcp_vpc`.
- `cxp` (String) The CXP where the connector should be provisioned.
- `gcp_region` (String) GCP region where VPC resides.
- `gcp_vpc_name` (String) GCP VPC name.
- `name` (String) The name of the connector.
- `segment_id` (String) The ID of the segment associated with the connector.
- `size` (String) The size of the connector, one of `SMALL`, `MEDIUM` or `LARGE`, `2LARGE`, `4LARGE`, `5LARGE`, `10LARGE`, `20LARGE`.

### Optional

- `billing_tag_ids` (Set of Number) IDs of billing tags associated with the connector.
- `customer_asn` (Number) A specific BGP ASN for the connector. This field cannot be updated once the connector has been provisioned. The ASN can be any private ASN (`64512 - 65534`, `4200000000 - 4294967294`) that is not used elsewhere in the network.
- `description` (String) The description of the connector.
- `enabled` (Boolean) Is the connector enabled. Default is `true`.
- `failover_cxps` (Set of String) A list of additional CXPs where the connector should be provisioned for failover.
- `gcp_project_id` (String) GCP Project ID.
- `gcp_routing` (Block List) GCP Routing describes the routes that are to be imported to the VPC from the CXP. This essentially controls how traffic is routed between the CXP and the VPC. When routing option is not provided, the traffic exiting the VPC will be sent to the CXP (i.e a default route to CXP will be added to all route tables on that VPC) (see [below for nested schema](#nestedblock--gcp_routing))
- `group` (String) The group of the connector.
- `scale_group_id` (String) The ID of the scale group associated with the connector.
- `vpc_subnet` (Block Set) The list of subnets of the target GCP VPC for routing purpose. Given connector supports multiple prefixes per subnet, each prefix under a subnet will be a new entry. (see [below for nested schema](#nestedblock--vpc_subnet))

### Read-Only

- `id` (String) The ID of this resource.
- `implicit_group_id` (Number) The ID of implicit group automaticaly created with the connector.
- `provision_state` (String) The provision state of the connector.

<a id="nestedblock--gcp_routing"></a>
### Nested Schema for `gcp_routing`

Required:

- `custom_prefix` (String) Specifies the source of the routes that need to be imported. The value could be `ADVERTISE_DEFAULT_ROUTE` and `ADVERTISE_CUSTOM_PREFIX`.
- `prefix_list_ids` (List of Number) IDs of prefix lists defined on the network.


<a id="nestedblock--vpc_subnet"></a>
### Nested Schema for `vpc_subnet`

Optional:

- `cidr` (String) The CIDR of the subnet.
- `id` (String) An identifier for the subnetwork resource with format `projects/{{project}}/regions/{{region}}/subnetworks/{{name}}`.

## Import

Import is supported using the following syntax:

```shell
terraform import alkira_connector_gcp_vpc.example CONNECTOR_ID
```
